---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ciphertrust_aws_policy_template Resource - terraform-provider-ciphertrust"
subcategory: ""
description: |-
  Use this resource to create and managa AWS key policy templates that can be used by multiple AWS keys.
---

# ciphertrust_aws_policy_template (Resource)

Use this resource to create and managa AWS key policy templates that can be used by multiple AWS keys.

## Example Usage

```terraform
# Define an AWS connection
resource "ciphertrust_aws_connection" "aws_connection" {
  name = "aws-connection-name"
}

data "ciphertrust_aws_account_details" "account_details" {
  aws_connection = ciphertrust_aws_connection.aws_connection.id
}

# Assign a ciphertrust_aws_kms resource to the connection
resource "ciphertrust_aws_kms" "kms" {
  account_id     = "account-id"
  aws_connection = ciphertrust_aws_connection.aws_connection.id
  name           = "kms-name"
  regions        = data.ciphertrust_aws_account_details.account_details.regions
}

# Define a policy template using key_admins and key_users
resource "ciphertrust_aws_policy_template" "policy_template_ex1" {
  key_admins = ["aws-iam-user", "aws-iam-role"]
  key_users  = ["aws-iam-user", "aws-iam-role"]
  km         = kms.id
}

# Define a policy template using a policy json
resource "ciphertrust_aws_policy_template" "policy_template_ex2" {
  km     = kms.id
  policy = <<-EOT
    {
    "Version": "2012-10-17",
    "Id": "kms-tf-1",
    "Statement": [{
      "Sid": "Enable IAM User Permissions 1",
      "Effect": "Allow",
      "Principal": {
        "AWS": "*"
      },
      "Action": "kms:*",
      "Resource": "*"
    }]
  }
  EOT
}

# Define an AWS key and assign the key policy template to it
resource "ciphertrust_aws_key" "aws_key" {
  kms    = ciphertrust_aws_kms.kms.id
  region = ciphertrust_aws_kms.kms.regions[0]
  policy {
    policy_template = ciphertrust_aws_policy_template.policy_template_ex1.id
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) A name for the template.

### Optional

- `account_id` (String) The AWS account which owns this resource.
- `auto_push` (Boolean) (Updatable) On update, automatically push policy changes. Must be set to true if 'is_verified' is true.
- `external_accounts` (Set of String) (Updatable) Other AWS accounts that can access to the key.
- `key_admins` (Set of String) (Updatable) Key administrators - users.
- `key_admins_roles` (Set of String) (Updatable) Key administrators - roles.
- `key_users` (Set of String) (Updatable) Key users - users.
- `key_users_roles` (Set of String) (Updatable) Key users - roles.
- `kms` (String) Name or ID of the KMS to which the template belongs.
- `policy` (String) (Updatable) AWS key policy json. 'policy' is mutually exclusive to all other policy parameters. If no policy parameters are specified the default policy is created.

### Read-Only

- `id` (String) The ID of this resource.
- `is_verified` (Boolean) If true, the policy template has been applied.
